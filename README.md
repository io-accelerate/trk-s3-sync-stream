[![Java Version](http://img.shields.io/badge/Java-1.8-blue.svg)](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)


The purpose of this library is to continuously upload (multi-part) files that are being generated in a folder.
The library is optimised for working with the video files generated by:
https://github.com/julianghionoiu/dev-screen-record

#### To build and run
```
./gradlew mavenCapsule
java -jar ./build/libs/s3-sync-1.0-SNAPSHOT-capsule.jar
```

#### Security model

The library will use the a client provided token that will be exchanged for temporary S3 credentials.
The exchange will be done through a different service which is outside the scope of this library.
For development purposes, a user with S3 read-write access can be used.


### The implementation will evolve through multiple iterations.

A. On demand file upload via command line tool
* Small file upload < 5MB
* Upload a large file using multi-part upload

B. On demand folder sync with S3 bucket via command line tool
* Detect and upload new files
* No upload if all files are in the S3 bucket

C. On demand upload of video file via command line tool (multiple runs)
* Multi-part upload video file while it is being generated
* Finalize video file upload when recording is stopped

D. Manage security lifecycle
* Read client token from file and obtain temporary S3 credentials
* Manage expiration of S3 credentials

E. Library to continuously sync folder
* Manage folder syncs on a different thread
* Provide progress feedback through Observers